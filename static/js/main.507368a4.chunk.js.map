{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","components/servises/Pixabay.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","App.js","reportWebVitals.js","index.js"],"names":["ImageGalleryItem","webformatURL","showImageHandle","className","src","alt","onClick","ImageGallery","images","showImageHandler","map","image","index","largeImageURL","id","Searchbar","onSubmit","useState","value","setValue","event","preventDefault","trim","toast","error","type","autoComplete","autoFocus","placeholder","onChange","e","target","propType","img","PropTypes","string","isRequired","func","fetchImages","searchItem","page","a","fetch","rawResult","ok","json","result","Button","loadMoreHandler","LoaderFunc","color","height","width","modalRoot","document","querySelector","Modal","onClose","bigURL","useEffect","window","removeEventListener","keyDownHandler","code","createPortal","currentTarget","maxPages","App","setImages","searchValue","setSearchValue","setPage","isLoading","setIsLoading","showModal","setShowModal","setError","prev","searchImagesHandler","scrollToHandler","top","documentElement","scrollHeight","setTimeout","scrollTo","behavior","total","Math","ceil","totalHits","hits","info","console","toString","searchString","length","imageUrl","Loader","min","autoClose","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.507368a4.chunk.js","sourcesContent":["// import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function ImageGalleryItem({ webformatURL, showImageHandle }) {\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        src={webformatURL}\n        alt=\"\"\n        className=\"ImageGalleryItem-image\"\n        onClick={showImageHandle}\n      />\n    </li>\n  );\n}\n\n// class ImageGalleryItem extends Component {\n//   render() {\n//     return (\n//       <li className=\"ImageGalleryItem\">\n//         <img\n//           src={this.props.webformatURL}\n//           alt=\"\"\n//           className=\"ImageGalleryItem-image\"\n//           onClick={this.props.showImageHandle}\n//         />\n//       </li>\n//     );\n//   }\n// }\n\nImageGalleryItem.propType = {\n  img: PropTypes.string.isRequired,\n  showImageHandle: PropTypes.func.isRequired,\n};\n\n// export default ImageGalleryItem;\n","// import { Component } from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nexport default function ImageGallery({ images, showImageHandler }) {\n  return (\n    <ul className=\"ImageGallery\">\n      {images.map((image, index) => {\n        return (\n          <ImageGalleryItem\n            key={image.id}\n            webformatURL={image.webformatURL}\n            showImageHandle={showImageHandler(image.largeImageURL)}\n            index={index}\n          />\n        );\n      })}\n    </ul>\n  );\n}\n\n// class ImageGallery extends Component {\n//   render() {\n//     return (\n//       <ul className=\"ImageGallery\">\n//         {this.props.images.map((image, index) => {\n//           return (\n//             <ImageGalleryItem\n//               key={image.id}\n//               webformatURL={image.webformatURL}\n//               showImageHandle={this.props.showImageHandler(image.largeImageURL)}\n//               index={index}\n//             />\n//           );\n//         })}\n//       </ul>\n//     );\n//   }\n// }\n\n// export default ImageGallery;\n","import { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default function Searchbar({ onSubmit }) {\n  const [value, setValue] = useState('');\n\n  const changeHandler = e => {\n    setValue(e.target.value);\n  };\n\n  const submitHandler = event => {\n    event.preventDefault();\n\n    if (value.trim() === '') {\n      toast.error('Please enter search request!');\n      return;\n    }\n    onSubmit(value);\n    setValue('');\n  };\n\n  return (\n    <header className=\"Searchbar\">\n      <form className=\"SearchForm\" onSubmit={submitHandler}>\n        <button type=\"submit\" className=\"SearchForm-button\">\n          <span className=\"SearchForm-button-label\">Search</span>\n        </button>\n\n        <input\n          className=\"SearchForm-input\"\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          onChange={changeHandler}\n          value={value}\n        />\n      </form>\n    </header>\n  );\n}\n\n// class Searchbar extends Component {\n//   state = {\n//     value: '',\n//   };\n\n//   changeHandler = e => {\n//     this.setState({ value: e.target.value });\n//   };\n\n//   submitHandler = event => {\n//     event.preventDefault();\n\n//     if (this.state.value.trim() === '') {\n//       toast.error('Please enter search request!');\n//       return;\n//     }\n//     this.props.onSubmit(this.state.value);\n//     this.setState({ value: '' });\n//   };\n\n//   render() {\n//     return (\n//       <header className=\"Searchbar\">\n//         <form className=\"SearchForm\" onSubmit={this.submitHandler}>\n//           <button type=\"submit\" className=\"SearchForm-button\">\n//             <span className=\"SearchForm-button-label\">Search</span>\n//           </button>\n\n//           <input\n//             className=\"SearchForm-input\"\n//             type=\"text\"\n//             autoComplete=\"off\"\n//             autoFocus\n//             placeholder=\"Search images and photos\"\n//             onChange={this.changeHandler}\n//             value={this.state.value}\n//           />\n//         </form>\n//       </header>\n//     );\n//   }\n// }\n\n// export default Searchbar;\n","const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '23243839-9e0dbc2f727b7d3ca19c2cc88';\n\nconst fetchImages = async (searchItem, page) => {\n  const rawResult = await fetch(\n    `${BASE_URL}?q=${searchItem}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  );\n\n  if (!rawResult.ok) {\n    throw rawResult;\n  }\n\n  const result = await rawResult.json();\n\n  return result;\n};\n\nexport default fetchImages;\n","// import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function Button({ loadMoreHandler }) {\r\n  return (\r\n    <button type=\"Button\" className=\"Button\" onClick={loadMoreHandler}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propType = {\r\n  loadMoreHandler: PropTypes.func.isRequired,\r\n};\r\n\r\n// class Button extends Component {\r\n//   render() {\r\n//     return (\r\n//       <button\r\n//         type=\"Button\"\r\n//         className=\"Button\"\r\n//         onClick={this.props.loadMoreHandler}\r\n//       >\r\n//         Load more\r\n//       </button>\r\n//     );\r\n//   }\r\n// }\r\n\r\n// export default Button;\r\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\n\nconst LoaderFunc = () => {\n  return (\n    <div className=\"loader\">\n      <Loader type=\"TailSpin\" color=\"#303f9f\" height={80} width={80} />\n    </div>\n  );\n};\n\nexport default LoaderFunc;\n","import { useEffect } from 'react';\n// import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default function Modal({ onClose, bigURL }) {\n  useEffect(() => {\n    window.removeEventListener('keydown', keyDownHandler);\n  });\n  const keyDownHandler = e => {\n    if (e.code === 'Escape') {\n      onClose();\n    }\n  };\n\n  const overlayClickHandler = event => {\n    if (event.currentTarget === event.target) {\n      onClose();\n    }\n  };\n\n  return createPortal(\n    <div className=\"Overlay\" onClick={overlayClickHandler}>\n      <div className=\"Modal\">\n        <img src={bigURL} alt=\"\" />\n      </div>\n    </div>,\n    modalRoot,\n  );\n}\n\n// class oldModal extends Component {\n// componentDidMount() {\n//   window.addEventListener('keydown', this.keyDownHandler);\n// }\n\n// componentWillUnmount() {\n//   window.removeEventListener('keydown', this.keyDownHandler);\n// }\n\n// keyDownHandler = e => {\n//   if (e.code === 'Escape') {\n//     this.props.onClose();\n//   }\n//   };\n\n//   overlayClickHandler = event => {\n//     if (event.currentTarget === event.target) {\n//       this.props.onClose();\n//     }\n//   };\n\n//   render() {\n//     return createPortal(\n//       <div className=\"Overlay\" onClick={this.overlayClickHandler}>\n//         <div className=\"Modal\">\n//           <img src={this.props.bigURL} alt=\"\" />\n//         </div>\n//       </div>,\n//       modalRoot,\n//     );\n//   }\n// }\n\n// export default oldModal;\n","// import { Component } from 'react';\nimport { useState, useEffect } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { toast } from 'react-toastify';\nimport ImageGallery from './components/ImageGallery';\nimport Searchbar from './components/Searchbar';\nimport fetchImages from './components/servises/Pixabay';\nimport Button from './components/Button';\nimport Loader from './components/Loader';\nimport Modal from './components/Modal';\n\nlet maxPages = 0;\nlet bigURL = '';\n\nexport default function App() {\n  const [images, setImages] = useState([]);\n  const [searchValue, setSearchValue] = useState('');\n  const [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [error, setError] = useState('');\n  // let maxPages = 0;\n  // let bigURL = '';\n\n  useEffect(\n    prev => {\n      if (searchValue === '') {\n        return;\n      } else if (\n        (prev !== searchValue && searchValue !== '') ||\n        prev !== page\n      ) {\n        searchImagesHandler();\n      }\n    },\n    [searchValue, page],\n  );\n\n  const closeModal = () => {\n    bigURL = '';\n    setShowModal(false);\n  };\n\n  const showImageHandler = imageUrl => () => {\n    bigURL = imageUrl;\n    setShowModal(true);\n  };\n  const scrollToHandler = () => {\n    const top = document.documentElement.scrollHeight - 150;\n\n    setTimeout(() => {\n      window.scrollTo({\n        top,\n        behavior: 'smooth',\n      });\n    }, 300);\n  };\n  const searchImagesHandler = async () => {\n    setIsLoading(true);\n    setError('');\n    try {\n      const result = await fetchImages(searchValue, page);\n\n      if (result.total !== 0) {\n        maxPages = Math.ceil(result.totalHits / 12);\n\n        setImages(prev => [...prev, ...result.hits]);\n      } else {\n        toast.info(`По вашему запросу ${searchValue} ничего не найдено!`);\n        setImages([]);\n      }\n    } catch (error) {\n      console.error(error);\n      setError(error.toString());\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const loadMoreHandler = () => {\n    scrollToHandler();\n    setPage(() => Math.min(maxPages, page + 1));\n  };\n\n  const onSubmitHandler = searchString => {\n    maxPages = 0;\n    setImages([]);\n    setSearchValue(searchString);\n    setPage(1);\n  };\n\n  return (\n    <div className=\"App\">\n      <Searchbar onSubmit={onSubmitHandler} />\n      {images.length > 0 && (\n        <ImageGallery\n          images={images}\n          showImageHandler={showImageHandler}\n          scrollToHandler={scrollToHandler}\n        />\n      )}\n      {error && <p className=\"ErrorText\">{error}</p>}\n      {isLoading && <Loader />}\n      {images.length > 0 && <Button loadMoreHandler={loadMoreHandler} />}\n      {showModal && <Modal bigURL={bigURL} onClose={closeModal}></Modal>}\n      <ToastContainer autoClose={2500} />\n    </div>\n  );\n}\n\n// class App extends Component {\n//   state = {\n//     images: [],\n//     searchValue: '',\n//     page: 1,\n//     isLoading: false,\n//     showModal: false,\n//     error: '',\n//   };\n\n//   maxPages = 0;\n//   bigURL = '';\n//   newElementHight = 0;\n\n//   componentDidUpdate(prevProps, prevState) {\n//     if (\n//       (prevState.searchValue !== this.state.searchValue &&\n//         this.state.searchValue !== '') ||\n//       prevState.page !== this.state.page\n//     ) {\n//       this.searchImagesHandler();\n//     }\n//   }\n\n// closeModal = () => {\n//   this.bigURL = '';\n//   this.setState({ showModal: false });\n// };\n\n// showImageHandler = imageUrl => () => {\n//   this.bigURL = imageUrl;\n//   this.setState({ showModal: true });\n// };\n\n// scrollToHandler = () => {\n//   const top = document.documentElement.scrollHeight - 150;\n\n//   setTimeout(() => {\n//     window.scrollTo({\n//       top,\n//       behavior: 'smooth',\n//     });\n//   }, 300);\n// };\n\n// searchImagesHandler = async () => {\n//   const { searchValue, page } = this.state;\n//   this.setState({ isLoading: true, error: '' });\n\n//   try {\n//     const result = await fetchImages(searchValue, page);\n\n//     if (result.total !== 0) {\n//       this.maxPages = Math.ceil(result.totalHits / 12);\n\n//       this.setState(({ images }) => ({\n//         images: [...images, ...result.hits],\n//       }));\n//     } else {\n//       toast.info(`По вашему запросу ${searchValue} ничего не найдено!`);\n//       this.setState(() => ({\n//         images: [],\n//       }));\n//     }\n//   } catch (error) {\n//     console.error(error);\n//     this.setState(() => ({ error: error.toString() }));\n//   } finally {\n//     this.setState({ isLoading: false });\n//   }\n// };\n\n//   loadMoreHandler = () => {\n//     this.scrollToHandler();\n//     this.setState(() => ({\n//       page: Math.min(this.maxPages, this.state.page + 1),\n//     }));\n//   };\n\n// onSubmitHandler = searchString => {\n//   this.maxPages = 0;\n\n//   this.setState(() => ({\n//     images: [],\n//     searchValue: searchString,\n//     page: 1,\n//   }));\n// };\n\n//   render() {\n//     return (\n//       <div className=\"App\">\n//         <Searchbar onSubmit={this.onSubmitHandler} />\n//         {this.state.error ? (\n//           <p className=\"ErrorText\">{this.state.error}</p>\n//         ) : (\n//           <ImageGallery\n//             images={this.state.images}\n//             showImageHandler={this.showImageHandler}\n//             scrollToHandler={this.scrollToHandler}\n//           />\n//         )}\n//         {this.state.isLoading && <Loader />}\n//         {this.state.page < this.maxPages && (\n//           <Button loadMoreHandler={this.loadMoreHandler} />\n//         )}\n//         {this.state.showModal && (\n//           <Modal bigURL={this.bigURL} onClose={this.closeModal}></Modal>\n//         )}\n//         <ToastContainer autoClose={2500} />\n//       </div>\n//     );\n//   }\n// }\n\n// export default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
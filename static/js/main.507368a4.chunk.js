(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{18:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(4),o=n.n(r),s=(n(18),n(6)),i=n.n(s),u=n(11),l=n(9),b=n(3),j=n(5),m=(n(12),n(2)),h=n.n(m),d=n(1);function f(e){var t=e.webformatURL,n=e.showImageHandle;return Object(d.jsx)("li",{className:"ImageGalleryItem",children:Object(d.jsx)("img",{src:t,alt:"",className:"ImageGalleryItem-image",onClick:n})})}function p(e){var t=e.images,n=e.showImageHandler;return Object(d.jsx)("ul",{className:"ImageGallery",children:t.map((function(e,t){return Object(d.jsx)(f,{webformatURL:e.webformatURL,showImageHandle:n(e.largeImageURL),index:t},e.id)}))})}function O(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(b.a)(n,2),r=c[0],o=c[1];return Object(d.jsx)("header",{className:"Searchbar",children:Object(d.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==r.trim()?(t(r),o("")):j.b.error("Please enter search request!")},children:[Object(d.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(d.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(d.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){o(e.target.value)},value:r})]})})}f.propType={img:h.a.string.isRequired,showImageHandle:h.a.func.isRequired};var g=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://pixabay.com/api/","?q=").concat(t,"&page=").concat(n,"&key=").concat("23243839-9e0dbc2f727b7d3ca19c2cc88","&image_type=photo&orientation=horizontal&per_page=12"));case 2:if((a=e.sent).ok){e.next=5;break}throw a;case 5:return e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=g;function v(e){var t=e.loadMoreHandler;return Object(d.jsx)("button",{type:"Button",className:"Button",onClick:t,children:"Load more"})}v.propType={loadMoreHandler:h.a.func.isRequired};var w=n(13),S=n.n(w),y=function(){return Object(d.jsx)("div",{className:"loader",children:Object(d.jsx)(S.a,{type:"TailSpin",color:"#303f9f",height:80,width:80})})},k=document.querySelector("#modal-root");function N(e){var t=e.onClose,n=e.bigURL;Object(a.useEffect)((function(){window.removeEventListener("keydown",c)}));var c=function(e){"Escape"===e.code&&t()};return Object(r.createPortal)(Object(d.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(d.jsx)("div",{className:"Modal",children:Object(d.jsx)("img",{src:n,alt:""})})}),k)}var I=0,C="";function H(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),o=Object(b.a)(r,2),s=o[0],m=o[1],h=Object(a.useState)(1),f=Object(b.a)(h,2),g=f[0],w=f[1],S=Object(a.useState)(!1),k=Object(b.a)(S,2),H=k[0],L=k[1],T=Object(a.useState)(!1),F=Object(b.a)(T,2),R=F[0],E=F[1],M=Object(a.useState)(""),q=Object(b.a)(M,2),U=q[0],B=q[1];Object(a.useEffect)((function(e){""!==s&&(e!==s&&""!==s||e!==g)&&G()}),[s,g]);var P=function(){var e=document.documentElement.scrollHeight-150;setTimeout((function(){window.scrollTo({top:e,behavior:"smooth"})}),300)},G=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),B(""),e.prev=2,e.next=5,x(s,g);case 5:0!==(t=e.sent).total?(I=Math.ceil(t.totalHits/12),c((function(e){return[].concat(Object(u.a)(e),Object(u.a)(t.hits))}))):(j.b.info("\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(s," \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!")),c([])),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),B(e.t0.toString());case 13:return e.prev=13,L(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(O,{onSubmit:function(e){I=0,c([]),m(e),w(1)}}),n.length>0&&Object(d.jsx)(p,{images:n,showImageHandler:function(e){return function(){C=e,E(!0)}},scrollToHandler:P}),U&&Object(d.jsx)("p",{className:"ErrorText",children:U}),H&&Object(d.jsx)(y,{}),n.length>0&&Object(d.jsx)(v,{loadMoreHandler:function(){P(),w((function(){return Math.min(I,g+1)}))}}),R&&Object(d.jsx)(N,{bigURL:C,onClose:function(){C="",E(!1)}}),Object(d.jsx)(j.a,{autoClose:2500})]})}var L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(H,{})}),document.getElementById("root")),L()}},[[41,1,2]]]);
//# sourceMappingURL=main.507368a4.chunk.js.map